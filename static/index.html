<!doctype html>
<head>
</head>
<script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@1.7.2"></script>
<body>
  <img id='input' src="0057.jpg" height="200" width="300">
  <canvas id="output" width="300" height="200"></canvas>
  <button onclick="load_model()">load model</button>
  <button onclick="predict()">predict</button>
  <script >
  let model;
  async function load_model(){
     model = await tf.loadLayersModel('model/model.json');
  }

  async function predict(){
     let x = tf.browser.fromPixels(document.getElementById('input')).asType('float32');
     scal=tf.scalar(1/255,'float32');
     x=tf.mul(x,scal);
     x.print();
     x=tf.expandDims(x,0);
     function draw(y){
     y=tf.squeeze(y,0);
     tf.browser.toPixels(y,document.getElementById('output'));
     }
     async function calculate(x,draw){
        y=await model.predict(x);
        draw(y)
     }
     calculate(x,draw);

  }

  </script>
</body>
